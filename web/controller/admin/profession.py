from web.controller.admin import route_adminfrom common.libs.WebHelper import ops_renderfrom common.model.profession import Professionfrom flask import request, jsonifyfrom application import dbimport time@route_admin.route('/profession', methods=['GET', 'POST'])def profession_index():    resp = {'code': 200, 'info': {}}    req = request.values    if request.method == 'GET':        info = Profession.query.order_by(Profession.pid.desc()).first()        resp['info'] = {            'p_name': info.p_name,            'url': info.url,            'id': info.pid        }        return ops_render('/admin/profession.html', resp)    id = req['id'] if 'id' in req else -1    isadd = req['isadd'] if 'isadd' in req else -1    p_name = req['p_name'] if 'p_name' in req else -1    url = req['url'] if 'url' in req else -1    if id == '-1':        info = Profession()    else:        info = Profession.query.filter_by(pid=id).first()    info.p_name = p_name    info.url = url    info.time = int(time.time())    db.session.add(info)    db.session.commit()    resp['msg'] = '操作成功'    return jsonify(resp)